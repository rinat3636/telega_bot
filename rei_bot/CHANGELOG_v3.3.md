# Changelog v3.3.0 (2026-02-12)

## üöÄ Features

- **QA-2: Materialized Balance Cache:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `user_balance_cache` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ trigger –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç stale-—á—Ç–µ–Ω–∏—è.

## üêõ Bug Fixes

- **QA-1: –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è:** `reserve_balance()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å.
- **QA-1: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è:** `charge_reserved_balance()` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `actual_amount` –∏ —Å–æ–∑–¥–∞–µ—Ç reconciliation –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö.
- **QA-3: FIFO –≤ Priority Queue:** –ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ score –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è FIFO –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ priority level.
- **QA-4: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –≤ Priority Queue:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã bucket –≤ `length_by_priority()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–¥–∞—á.
- **QA-5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ labels –≤ Histogram:** `get_all_metrics()` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç labels –¥–ª—è histogram.

## üß™ Tests

- –î–æ–±–∞–≤–ª–µ–Ω `tests/test_qa_fixes.py` —Å unit-—Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö 7 QA –Ω–∞—Ö–æ–¥–æ–∫.

## üìö Documentation

- –î–æ–±–∞–≤–ª–µ–Ω `QA_FIXES_v3.3.md` —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.
- –û–±–Ω–æ–≤–ª–µ–Ω `README.md`.
