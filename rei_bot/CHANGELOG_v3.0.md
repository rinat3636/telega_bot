# CHANGELOG v3.0 ‚Äî Production Ready "–ü–æ–¥ –∫–ª—é—á"

**–î–∞—Ç–∞:** 2026-02-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

## üéØ –¶–µ–ª—å

–î–æ–≤–µ—Å—Ç–∏ –±–æ—Ç –æ—Ç **beta-prod (75%)** –¥–æ **production-ready –ø–æ–¥ –∫–ª—é—á (100%)**.

---

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π lock –¥–ª—è job:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è job –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
- **Deadline/cancel/retry –¥–ª—è jobs:** –ó–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É, –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é, –µ—Å—Ç—å retry-–ø–æ–ª–∏—Ç–∏–∫–∞.
- **–ó–∞—â–∏—Ç–∞ –æ—Ç replay-–∞—Ç–∞–∫ webhook:** HMAC –ø–æ–¥–ø–∏—Å—å, timestamp window, deduplication.
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π Redis rate-limit:** –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ horizontal scaling, cost-based limiting.

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (High severity)

### F-201: –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã ledger

- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–±–∞–ª–∞–Ω—Å ‚â• 0, —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å ref_id).
- **–†–µ—à–µ–Ω–∏–µ:**
  - `CHECK(type IN ("credit", "debit", "refund"))`
  - `CHECK(amount != 0)`
  - `UNIQUE(user_id, ref_type, ref_id)`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –≤ ledger.

### F-202: –ì–ª–æ–±–∞–ª—å–Ω—ã–π lock –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö job

- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí –¥–≤–æ–π–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏.
- **–†–µ—à–µ–Ω–∏–µ:**
  - `JobLockManager` —Å Redis distributed lock.
  - –ü–æ–ª–∏—Ç–∏–∫–∞: 1 –∞–∫—Ç–∏–≤–Ω–∞—è paid-job –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è.

### F-203: Deadline/cancel/retry –¥–ª—è jobs

- **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≤–∏—Å—à–∏–µ job –Ω–∞–≤—Å–µ–≥–¥–∞ –¥–µ—Ä–∂–∞—Ç –¥–µ–Ω—å–≥–∏.
- **–†–µ—à–µ–Ω–∏–µ:**
  - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å `jobs` —Å `expires_at`, `max_runtime`, `retry_count`.
  - Worker —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π deadline –∏ retry-–ª–æ–≥–∏–∫–æ–π.
  - –ö–æ–º–∞–Ω–¥–∞ `/cancel` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–¥–∞—á–∏ –Ω–µ –∑–∞–≤–∏—Å–∞—é—Ç, —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è, –µ—Å—Ç—å retry.

### F-204: –ó–∞—â–∏—Ç–∞ –æ—Ç replay-–∞—Ç–∞–∫ webhook

- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–º–µ–Ω—ã webhook.
- **–†–µ—à–µ–Ω–∏–µ:**
  - `WebhookValidator` —Å —Ç—Ä–µ–º—è —É—Ä–æ–≤–Ω—è–º–∏ –∑–∞—â–∏—Ç—ã:
    1. HMAC –ø–æ–¥–ø–∏—Å—å
    2. Timestamp window
    3. Deduplication –ø–æ webhook_id
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—â–∏—Ç–∞ –æ—Ç replay-–∞—Ç–∞–∫ –∏ –ø–æ–¥–¥–µ–ª–∫–∏ webhook.

### F-205: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π rate-limit –Ω–∞ Redis

- **–ü—Ä–æ–±–ª–µ–º–∞:** In-memory rate limiter –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ horizontal scaling.
- **–†–µ—à–µ–Ω–∏–µ:**
  - `RedisRateLimiter` —Å sliding window –Ω–∞ Redis sorted sets.
  - Cost-based limiting (‚ÇΩ/—á–∞—Å).
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ horizontal scaling, –∑–∞—â–∏—Ç–∞ –æ—Ç —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ –∞–±—É–∑–∞.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README_v3.0.md:** –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
- **CHANGELOG_v3.0.md:** –≠—Ç–æ—Ç —Ñ–∞–π–ª.

---

## ‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Medium severity)

- **F-206:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **F-207:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π GC –∞—Å—Å–µ—Ç–æ–≤
- **F-208:** –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã
- **F-209:** –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- **F-210:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞

---

## ‚úÖ –ò—Ç–æ–≥

–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ production —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã.
